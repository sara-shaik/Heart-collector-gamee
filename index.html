<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Heart Catch â€” For My Love</title>
<style>
:root{
  --bg1: #ffdff0;
  --bg2: #ffe8f4;
}
body {
  margin:0; padding:0;
  font-family:Arial, sans-serif;
  background: linear-gradient(180deg,var(--bg1),var(--bg2));
  overflow:hidden;
}
.sky{
  position:relative;
  width:100%;
  max-width:900px;
  height:640px;
  margin:auto;
  overflow:hidden;
  background: radial-gradient(circle at 30% 20%, rgba(255,255,255,0.9), transparent 40%);
}
.play-area{
  position:absolute; top:0; left:0; right:0; bottom:0;
  z-index:5;
}
.heart{
  position:absolute;
  width:48px;
  height:48px;
  cursor:pointer;
  z-index:10;
}
.start-screen{
  position:absolute; inset:0;
  display:flex; align-items:center; justify-content:center;
  background:rgba(255,240,245,0.85);
  z-index:50;
  flex-direction: column;
}
.start-screen.hide{display:none;}
.start-screen button{
  background: linear-gradient(90deg,#ff7aa8,#ff5fa0);
  border:none; color:white;
  padding:12px 20px;
  font-size:16px;
  border-radius:10px;
  cursor:pointer;
}
.score-board{
  position:absolute;
  top:10px;
  left:10px;
  background:rgba(255,255,255,0.8);
  padding:8px 12px;
  border-radius:10px;
  font-weight:bold;
  z-index:20;
}
.sparkle {
  position: absolute;
  width: 10px; height: 10px;
  background: radial-gradient(circle, #fff8e7 0%, #ffd6e8 60%, transparent 100%);
  border-radius: 50%;
  pointer-events: none;
  animation: sparkleAnim 0.6s ease-out forwards;
  z-index:30;
}
@keyframes sparkleAnim {
  0% { transform: scale(1); opacity:1; }
  100% { transform: scale(3); opacity:0; }
}
.overlay{
  position:absolute; inset:0;
  display:flex; align-items:center; justify-content:center;
  background: rgba(0,0,0,0.25);
  z-index:40; opacity:0; pointer-events:none; transition: opacity 0.3s;
}
.overlay.show{opacity:1; pointer-events:auto;}
.win-card{
  background:white; padding:28px 32px; border-radius:16px; text-align:center;
  box-shadow:0 10px 30px rgba(0,0,0,0.2);
}
.win-card button{
  background: linear-gradient(90deg,#ff7aa8,#ff5fa0);
  color:white; border:none; padding:10px 18px; border-radius:10px;
  font-weight:bold; cursor:pointer; margin-top:10px;
}
.bunny-basket{
  position:absolute;
  bottom:10px;
  left:50%;
  transform:translateX(-50%);
  width:120px;
  height:80px;
  border-radius:10px;
  background: linear-gradient(180deg,#f5c5d6,#ffb6cc);
  border:3px solid rgba(200,80,120,0.2);
  z-index:15;
}
.bunny-img{
  position:absolute;
  bottom:0;
  left:50%;
  transform:translateX(-50%);
  width:100px;
  z-index:16;
  pointer-events:none;
}
</style>
</head>
<body>
<div class="sky" id="sky">
  <div class="start-screen" id="startScreen">
    <h2>Heart Catch â€” For My Love ðŸ’˜</h2>
    <button id="startBtn">Start Game</button>
  </div>

  <div class="score-board">Score: <span id="score">0</span> / 50</div>

  <div class="play-area" id="playArea"></div>

  <canvas id="confettiCanvas" style="position:absolute; inset:0; z-index:30; pointer-events:none;"></canvas>

  <div class="bunny-basket" id="basket"></div>
  <img src="bunny.png" class="bunny-img" alt="bunny">

  <div class="overlay" id="overlay">
    <div class="win-card">
      <h2>ðŸŽ‰ You caught all hearts! ðŸ’ž</h2>
      <button id="playAgainBtn">Play Again</button>
    </div>
  </div>
</div>

<script>
const HEART_COUNT=10;
const POINTS_PER_HEART=5;
const TARGET_SCORE=HEART_COUNT*POINTS_PER_HEART;

const playArea=document.getElementById('playArea');
const scoreEl=document.getElementById('score');
const startBtn=document.getElementById('startBtn');
const startScreen=document.getElementById('startScreen');
const overlay=document.getElementById('overlay');
const playAgainBtn=document.getElementById('playAgainBtn');
const confettiCanvas=document.getElementById('confettiCanvas');
const sky=document.getElementById('sky');
const basket=document.getElementById('basket');

let hearts=[], score=0;

function createHeartSVG(){
  const svgNS="http://www.w3.org/2000/svg";
  const svg=document.createElementNS(svgNS,"svg");
  svg.setAttribute("viewBox","0 0 64 64");
  svg.setAttribute("width","48");
  svg.setAttribute("height","48");

  const defs=document.createElementNS(svgNS,"defs");
  const grad=document.createElementNS(svgNS,"radialGradient");
  const gradId="g"+Math.floor(Math.random()*1000000);
  grad.setAttribute("id",gradId); grad.setAttribute("cx","30%"); grad.setAttribute("cy","30%"); grad.setAttribute("r","70%");
  let stop1=document.createElementNS(svgNS,"stop"); stop1.setAttribute("offset","0%"); stop1.setAttribute("stop-color","#ff8fb0");
  let stop2=document.createElementNS(svgNS,"stop"); stop2.setAttribute("offset","70%"); stop2.setAttribute("stop-color","#ff2f60");
  let stop3=document.createElementNS(svgNS,"stop"); stop3.setAttribute("offset","100%"); stop3.setAttribute("stop-color","#e60044");
  grad.append(stop1,stop2,stop3); defs.appendChild(grad); svg.appendChild(defs);

  const path=document.createElementNS(svgNS,"path");
  path.setAttribute("d","M47.6 6c-5.6 0-9.9 3.6-11.6 6.1-1.7-2.5-6-6.1-11.6-6.1C13.3 6 6 13.5 6 22.2 6 37 30 48 32 52c2-4 26-15 26-29.8C58 13.5 50.7 6 47.6 6z");
  path.setAttribute("fill","url(#"+gradId+")");
  svg.appendChild(path);
  return svg;
}

function createHearts(){
  playArea.innerHTML=""; hearts=[];
  const w=playArea.clientWidth; const h=playArea.clientHeight;
  for(let i=0;i<HEART_COUNT;i++){
    const div=document.createElement("div");
    div.className="heart";
    div.style.left=Math.random()*(w-50)+"px";
    div.style.top=Math.random()*-100+"px"; // start above play area
    div.appendChild(createHeartSVG());
    playArea.appendChild(div);
    const vy=1+Math.random()*2;
    hearts.push({el:div,vy:vy});
    div.addEventListener('pointerdown',()=>collect(div));
  }
  animateHearts();
}

function animateHearts(){
  const h=playArea.clientHeight;
  const bRect=basket.getBoundingClientRect();
  hearts.forEach(obj=>{
    let top=parseFloat(obj.el.style.top);
    top+=obj.vy;
    obj.el.style.top=top+"px";

    // Check collision with basket
    const elRect=obj.el.getBoundingClientRect();
    if(elRect.bottom >= bRect.top && elRect.left + elRect.width/2 >= bRect.left && elRect.left + elRect.width/2 <= bRect.right){
      collect(obj.el);
    }

    // reset if falls below play area
    if(top>h) obj.el.style.top=-50+"px";
  });
  requestAnimationFrame(animateHearts);
}

function collect(el){
  if(!el.parentNode) return;
  el.remove();
  score+=POINTS_PER_HEART;
  scoreEl.textContent=score;

  // sparkle
  const rect=el.getBoundingClientRect();
  const sparkle=document.createElement("div");
  sparkle.className="sparkle";
  sparkle.style.left=(rect.left+rect.width/2)+"px";
  sparkle.style.top=(rect.top+rect.height/2)+"px";
  document.body.appendChild(sparkle);
  setTimeout(()=>sparkle.remove(),600);

  if(score>=TARGET_SCORE) win();
}

function win(){
  overlay.classList.add("show");
  confetti();
}

function confetti(){
  const ctx=confettiCanvas.getContext("2d");
  confettiCanvas.width=sky.clientWidth;
  confettiCanvas.height=sky.clientHeight;
  const pieces=[];
  const colors=['#ff2f60','#ff8fb0','#ffe3f0','#ffb6c1','#e23a6a'];
  for(let i=0;i<100;i++)
    pieces.push({x:Math.random()*confettiCanvas.width,y:Math.random()*confettiCanvas.height,vy:2+Math.random()*4,color:colors[Math.floor(Math.random()*colors.length)],size:5+Math.random()*4});
  (function frame(){
    ctx.clearRect(0,0,confettiCanvas.width,confettiCanvas.height);
    for(const p of pieces){
      p.y+=p.vy;
      if(p.y>confettiCanvas.height) p.y=-10;
      ctx.fillStyle=p.color;
      ctx.fillRect(p.x,p.y,p.size,p.size*0.6);
    }
    requestAnimationFrame(frame);
  })();
}

startBtn.addEventListener("click",()=>{
  startScreen.classList.add("hide");
  score=0; scoreEl.textContent="0";
  createHearts();
});

playAgainBtn.addEventListener("click",()=>{
  overlay.classList.remove("show");
  score=0; scoreEl.textContent="0";
  createHearts();
});
</script>
</body>
</html>
